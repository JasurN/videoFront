(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{152:function(e,t,a){},175:function(e,t,a){e.exports=a(206)},204:function(e,t,a){},206:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(29),l=a.n(o),s=a(14),c=a(15),i=a(17),u=a(16),d=a(24),p=a(22),m=a(118),h=a(155),f=a(19),E=a(52),g=a(157),v=a(158),y={message:{},status:null},b={},S=a(20),C={token:localStorage.getItem("token"),isAuthenticated:null,isLoading:!1,user:null,user_info:null,user_type:null},_=a(119),O={records:[]},w={selectedRecord:{},recordDetails:[]},R=Object(E.combineReducers)({errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return{message:t.payload.message,status:t.payload.status};default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_MESSAGE":return t.payload;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADING":return Object(S.a)(Object(S.a)({},e),{},{isLoading:!0});case"USER_LOADED":return Object(S.a)(Object(S.a)(Object(S.a)({},e),t.payload),{},{isAuthenticated:!0,isLoading:!1,user_type:t.payload.user_info.userType.name});case"LOGIN_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(S.a)(Object(S.a)(Object(S.a)({},e),t.payload),{},{isAuthenticated:!0,isLoading:!1,user_type:t.payload.user_info.userType.name});case"PASSWORD_CHANGED":case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT_SUCCESS":return localStorage.removeItem("token"),Object(S.a)(Object(S.a)({},e),{},{token:null,user:null,isAuthenticated:!1,isLoading:!1,user_type:null});case"REGISTER_FAIL":case"REGISTER_SUCCESS":default:return e}},records:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_RECORDS":return Object(S.a)(Object(S.a)({},e),{},{records:t.payload});case"ADD_RECORD":return Object(S.a)(Object(S.a)({},e),{},{records:[].concat(Object(_.a)(e.records),[t.payload])});case"RECORD_REMOVED_SUCCESSFULLY":return Object(S.a)(Object(S.a)({},e),{},{records:e.records.filter((function(e){return e.id!==t.payload}))});default:return e}},recordDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_RECORD_DETAILS":case"GET_RECORD_DETAILS":return Object(S.a)(Object(S.a)({},e),{},{recordDetails:t.payload});case"ADD_RECORD_DETAIL":return Object(S.a)(Object(S.a)({},e),{},{recordDetails:[].concat(Object(_.a)(e.recordDetails),[t.payload])});case"ADD_SELECTED_RECORD_TO_STORE":return Object(S.a)(Object(S.a)({},e),{},{selectedRecord:t.payload});case"RECORD_DETAIL_PLAY_SUCCESSFULLY":case"FILE_UPLOAD_SUCCESSFULLY":case"RECORD_DETAIL_STOP_SUCCESSFULLY":return Object(S.a)(Object(S.a)({},e),{},{recordDetails:e.recordDetails.map((function(e){return e.id===t.payload.id&&(e=t.payload),e}))});case"RECORD_DETAIL_REMOVED_SUCCESSFULLY":return Object(S.a)(Object(S.a)({},e),{},{recordDetails:e.recordDetails.filter((function(e){return e.id!==t.payload}))});default:return e}}}),T=[v.a],k=Object(E.createStore)(R,{},Object(g.composeWithDevTools)(E.applyMiddleware.apply(void 0,T))),D=a(21),j=a.n(D),A=function(e){return{type:"CREATE_MESSAGE",payload:e}},N=function(e,t){return{type:"GET_ERRORS",payload:{message:e,status:t}}},L=function(e){var t=e().auth.token,a={headers:{"Content-Type":"application/json"}};return t&&(a.headers.Authorization="Token ".concat(t)),a},I=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.auth,t=e.isAuthenticated,a=e.user,n=e.user_info,o=r.a.createElement("ul",{className:"navbar-nav ml-auto mt-1 mt-lg-0"},n?1===n.userType.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{to:"/allusers",className:"nav-link mr-3"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{to:"/deleteRecord",className:"nav-link mr-3"},"\u0414\u0435\u043b\u0430 \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{to:"/deleteRecordDetail",className:"nav-link mr-3"},"\u0424\u0430\u0439\u043b\u044b \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f"))):r.a.createElement("span",null),n?2===n.userType.id&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{to:"/allDepartmentUsers",className:"nav-link mr-3"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439")):r.a.createElement("span",null),r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{to:"/changepassword",className:"nav-link mr-3"},"\u041f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c")),n?1===n.userType.id&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{to:"/register",className:"nav-link mr-3"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044f")):r.a.createElement("span",null),r.a.createElement("span",{className:"navbar-text mr-2"},r.a.createElement("strong",null,a?"\u0412\u044b \u0432\u043e\u0448\u043b\u0438 \u043a\u0430\u043a: ".concat(a.first_name," ").concat(a.last_name):"")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:"nav-link btn btn-primary btn-sm text-light ml-2 rounded",onClick:this.props.logout},"\u0412\u044b\u0439\u0442\u0438"))),l=r.a.createElement("ul",{className:"navbar-nav ml-auto mt-2 mt-lg-0"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{to:"/login",className:"nav-link"},"\u041b\u043e\u0433\u0438\u043d")));return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-light bg-light"},r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo01","aria-controls":"navbarTogglerDemo01","aria-expanded":"false","aria-label":"Toggle navigation"}),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo01"},r.a.createElement("a",{className:"navbar-brand ml-3",href:"/"},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430"),t?o:l)))}}]),a}(n.Component),x=Object(f.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(e,t){j.a.post("/api/auth/logout/",null,L(t)).then((function(){e({type:"LOGOUT_SUCCESS"})})).catch((function(t){e(N(t.response.data,t.response.status))}))}}})(I),U=a(224),F=a(222),H=a(30),G=a(6),M=a.n(G),P=a(12),q=a(226),B=function(){return function(e,t){j.a.get("/api/records/",L(t)).then((function(t){e({type:"GET_RECORDS",payload:t.data})})).catch((function(t){return e(N(t.response.data,t.response.status))}))}},W=function(){var e=Object(P.a)(M.a.mark((function e(t,a){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify({record_id:t,short_description:a}),e.abrupt("return",j.a.post("/api/records/",n,L(k.getState)).then((function(e){k.dispatch(A({recordAdded:"\u041d\u043e\u0432\u043e\u0435 \u0434\u0435\u043b\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043e"})),k.dispatch({type:"ADD_RECORD",payload:e.data})})).catch((function(e){k.dispatch(A({recordAlreadyExists:"\u0414\u0435\u043b\u043e \u0441 \u0442\u0430\u043a\u0438\u043c ID  \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"})),k.dispatch({type:"ADD_RECORD_FAIL"})})));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Y=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={record_id:"",short_description:""},e.onSubmit=function(){var t=Object(P.a)(M.a.mark((function t(a){var n,r,o;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,r=n.record_id,o=n.short_description,t.next=4,W(r,o);case 4:e.clearInputs();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){e.setState(Object(H.a)({},t.target.name,t.target.value))},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.record_id,a=e.short_description;return r.a.createElement(q.a,{onSubmit:this.onSubmit},r.a.createElement("h2",null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0434\u0435\u043b\u043e"),r.a.createElement(q.a.Group,null,r.a.createElement(q.a.Input,{name:"record_id",className:"deloInput",placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 ID \u0434\u0435\u043b\u043e",onChange:this.handleChange,value:t,required:!0})),r.a.createElement(q.a.TextArea,{name:"short_description",label:"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u0435\u043b\u0430",value:a,onChange:this.handleChange}),r.a.createElement(q.a.Button,{primary:!0},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))}},{key:"clearInputs",value:function(){this.setState({record_id:"",short_description:""})}}]),a}(n.Component),V=a(228),J=a(207),z=function(e){return function(t){t({type:"ADD_SELECTED_RECORD_TO_STORE",payload:e})}},$=function(e,t,a){var n=JSON.stringify({record_id:e,status_id:1,short_description:t,category_id:a});return j.a.post("/api/records/details/",n,L(k.getState)).then((function(e){k.dispatch({type:"ADD_RECORD_DETAIL",payload:e.data}),k.dispatch(A({recordDetailAdded:"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0430"}))})).catch((function(e){k.dispatch(N(e.response.data,e.response.status)),k.dispatch({type:"ADD_RECORD_DETAIL_FAIL"})}))},K=function(e){var t=e.selectedRecordId,a=e.login,n=e.password,r=e.room_name,o=e.port,l=e.ipAddress;return function(e,s){var c=JSON.stringify({login:a,password:n,room_name:r,port:o,ipAddress:l});j.a.post("/api/records/details/".concat(t,"/play/"),c,L(s)).then((function(t){e({type:"RECORD_DETAIL_PLAY_SUCCESSFULLY",payload:t.data})})).catch((function(t){e(N(t.response.data,t.response.status)),e(A({cameraNotWork:"\u041a\u0430\u043c\u0435\u0440\u0430 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442"}))}))}},Q=function(e){return function(t,a){j.a.get("/api/records/details/".concat(e,"/stop/"),L(a)).then((function(e){t({type:"RECORD_DETAIL_STOP_SUCCESSFULLY",payload:e.data})})).catch((function(e){return t(N(e.response.data,e.response.status))}))}},X=a(49),Z=(a(151),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={deleteConfirmOpen:!1,selectedRecordId:-1},e.MoreInfoLinkOnClickHandler=function(t){var a=parseInt(t.currentTarget.parentNode.getAttribute("record_id")),n=e.props.records.find((function(e){return e.id===a}));e.props.addSelectedRecordToStory(n)},e.deleteRecordSubmit=function(t){var a=parseInt(t.currentTarget.parentNode.getAttribute("record_id"));e.setState({selectedRecordId:a}),Object(X.confirmAlert)({title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0434\u0435\u043b\u0430",message:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0435\u043b\u043e?",buttons:[{label:"\u0414\u0430",onClick:function(){var t=e.state.selectedRecordId;e.props.removeRecord(t)}},{label:"\u041d\u0435\u0442",onClick:function(){}}]})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.getRecords()}},{key:"render",value:function(){var e=this.identifyUserTypeAndGetRecord(),t=this.props.user_type;return console.log(t),r.a.createElement(V.a,{celled:!0},r.a.createElement(V.a.Header,null,r.a.createElement(V.a.Row,null,r.a.createElement(V.a.HeaderCell,null,"ID \u0434\u0435\u043b\u0430"),r.a.createElement(V.a.HeaderCell,null,"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),r.a.createElement(V.a.HeaderCell,null,"\u0421\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044c \u0434\u0435\u043b\u0430"),r.a.createElement(V.a.HeaderCell,null,"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"),r.a.createElement(V.a.HeaderCell,null,"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"),"\u0421\u0443\u043f\u0435\u0440 \u0410\u0434\u043c\u0438\u043d"===t?"":r.a.createElement(V.a.HeaderCell,null,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"))),r.a.createElement(V.a.Body,null,e),r.a.createElement(F.a,null))}},{key:"identifyUserTypeAndGetRecord",value:function(){var e=this.props,t=e.records,a=e.user_type;if(t.length>0&&a){if("\u0421\u0443\u043f\u0435\u0440 \u0410\u0434\u043c\u0438\u043d"===a)return this.getSuperAdminRecord();if("\u041d\u0430\u0447\u0430\u043b\u044c\u043d\u0438\u043a \u043e\u0442\u0434\u0435\u043b\u0430"===a)return this.getAdminRecord();if("\u0421\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c"===a)return this.getUserRecord()}}},{key:"getSuperAdminRecord",value:function(){var e=this;return this.props.records.map((function(t){return"a"===t.status?r.a.createElement(V.a.Row,{key:t.id},r.a.createElement(V.a.Cell,null,t.record_id),r.a.createElement(V.a.Cell,null,t.short_description),r.a.createElement(V.a.Cell,null,"".concat(t.first_name," ").concat(t.last_name)),r.a.createElement(V.a.Cell,null,new Date(t.created_at).toLocaleString("ru-RU")),r.a.createElement(V.a.Cell,{record_id:t.id},r.a.createElement(d.b,{onClick:e.MoreInfoLinkOnClickHandler,to:"/detail"},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"))):r.a.createElement(V.a.Row,null)}))}},{key:"getAdminRecord",value:function(){var e=this,t=this.getRemoveAndConfirmButton();return this.props.records.map((function(a){return a.department===e.props.user_info.department.name&&"a"===a.status?r.a.createElement(V.a.Row,{key:a.id},r.a.createElement(V.a.Cell,null,a.record_id),r.a.createElement(V.a.Cell,null,a.short_description),r.a.createElement(V.a.Cell,null,"".concat(a.first_name," ").concat(a.last_name)),r.a.createElement(V.a.Cell,null,new Date(a.created_at).toLocaleString("ru-RU")),r.a.createElement(V.a.Cell,{record_id:a.id},r.a.createElement(d.b,{onClick:e.MoreInfoLinkOnClickHandler,to:"/detail"},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")),r.a.createElement(V.a.Cell,{record_id:a.id},e.props.user&&e.props.user.id===a.owner&&t)):r.a.createElement(V.a.Row,null)}))}},{key:"getUserRecord",value:function(){var e=this,t=this.getRemoveAndConfirmButton();return this.props.records.map((function(a){return a.owner===e.props.user.id&&"a"===a.status?r.a.createElement(V.a.Row,{key:a.id},r.a.createElement(V.a.Cell,null,a.record_id),r.a.createElement(V.a.Cell,null,a.short_description),r.a.createElement(V.a.Cell,null,"".concat(a.first_name," ").concat(a.last_name)),r.a.createElement(V.a.Cell,null,new Date(a.created_at).toLocaleString("ru-RU")),r.a.createElement(V.a.Cell,{record_id:a.id},r.a.createElement(d.b,{onClick:e.MoreInfoLinkOnClickHandler,to:"/detail"},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")),r.a.createElement(V.a.Cell,{record_id:a.id},t)):r.a.createElement(V.a.Row,null)}))}},{key:"getRemoveAndConfirmButton",value:function(){return r.a.createElement(J.a,{negative:!0,onClick:this.deleteRecordSubmit},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0414\u0435\u043b\u043e")}}]),a}(n.Component)),ee=Object(f.b)((function(e){return{records:e.records.records,user_type:e.auth.user_type,user_info:e.auth.user_info,user:e.auth.user}}),{getRecords:B,addSelectedRecordToStory:z,removeRecord:function(e){return function(t,a){j.a.put("/api/records/".concat(e,"/"),L(a)).then((function(){t({type:"RECORD_REMOVED_SUCCESSFULLY",payload:e})})).catch((function(e){return t(N(e.response.data,e.response.status))}))}}})(Z),te=a(223),ae=a(229),ne=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.auth,t=e.isAuthenticated,a=e.user,n=e.user_info,o=e.user_type;return localStorage.setItem("department",n.department.name),r.a.createElement("div",{className:" mt-2"},t?r.a.createElement(te.a,null,r.a.createElement(ae.a,{style:{width:"15em"},className:"text-right"},r.a.createElement(ae.a.Img,{className:"profileImage",variant:"top",src:n?n.profileImage:r.a.createElement("div",null)}),r.a.createElement(ae.a.Body,null,r.a.createElement(ae.a.Title,null,a?"".concat(a.first_name," ").concat(a.last_name):r.a.createElement("div",null)),r.a.createElement(ae.a.Text,null,n&&o&&"\u0421\u0443\u043f\u0435\u0440 \u0410\u0434\u043c\u0438\u043d"!==o?n.department.name:r.a.createElement("div",null)),r.a.createElement(ae.a.Text,null,n?n.userType.name:r.a.createElement("div",null))))):r.a.createElement("div",null))}}]),a}(n.Component),re=Object(f.b)((function(e){return{auth:e.auth}}),null)(ne),oe=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.auth.user_info;return r.a.createElement("div",null,r.a.createElement(re,null),r.a.createElement(U.a,null,e?1!==e.userType.id&&r.a.createElement(Y,null):r.a.createElement("span",null),r.a.createElement(F.a,null),r.a.createElement("h3",null,"\u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u0434\u0435\u043b\u0430"),r.a.createElement(ee,null)))}}]),a}(n.Component),le=Object(f.b)((function(e){return{auth:e.auth}}))(oe),se=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){var n=this.props,r=n.error,o=n.alert,l=n.message;r!==e.error&&(r.message.name&&o.error("Name: ".concat(r.message.name)),r.message.email&&o.error("Email: ".concat(r.message.email)),r.message.message&&o.error("Message: ".concat(r.message.message)),r.message.non_field_errors&&o.error(r.message.non_field_errors),r.message.username&&o.error(r.message.username)),l!==e.message&&(l.deleteLead&&o.success(l.deleteLead),l.addLead&&o.success(l.addLead),l.passwordNotMatch&&o.error(l.passwordNotMatch),l.fillAllFields&&o.error(l.fillAllFields),l.passwordChanged&&o.success(l.passwordChanged),l.userRegistered&&o.success(l.userRegistered),l.recordAdded&&o.success(l.recordAdded),l.recordAlreadyExists&&o.error(l.recordAlreadyExists),l.userNotRegistered&&o.success(l.userNotRegistered),l.cameraNotWork&&o.error(l.cameraNotWork))}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null)}}]),a}(n.Component),ce=Object(f.b)((function(e){return{error:e.errors,message:e.messages}}))(Object(m.b)()(se)),ie=function(e,t){return"".concat(e.toLowerCase()).concat(t.toLowerCase())},ue=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={firstName:"",lastName:"",password:""},e.onSubmit=function(t){t.preventDefault();var a=ie(e.state.firstName,e.state.lastName);e.props.login(a,e.state.password),e.setState({password:""})},e.onChange=function(t){return e.setState(Object(H.a)({},t.target.name,t.target.value))},e}return Object(c.a)(a,[{key:"render",value:function(){if(this.props.isAuthenticated)return r.a.createElement(p.a,{to:"/"});var e=this.state,t=e.firstName,a=e.lastName,n=e.password;return r.a.createElement("div",{className:"col-md-4 m-auto"},r.a.createElement("div",{className:"card card-body mt-2"},r.a.createElement("h2",{className:"text-center"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"\u0418\u043c\u044f*"),r.a.createElement("input",{type:"text",className:"form-control",name:"firstName",onChange:this.onChange,value:t})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f*"),r.a.createElement("input",{type:"text",className:"form-control",name:"lastName",onChange:this.onChange,value:a})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"\u041f\u0430\u0440\u043e\u043b\u044c*"),r.a.createElement("input",{type:"password",className:"form-control",name:"password",onChange:this.onChange,value:n,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"\u041b\u043e\u0433\u0438\u043d"))))))}}]),a}(n.Component),de=Object(f.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(a,n){var r=JSON.stringify({username:e,password:t});j.a.post("/api/auth/login",r,L(n)).then((function(e){a({type:"LOGIN_SUCCESS",payload:e.data})})).catch((function(e){a(N(e.response.data,e.response.status)),a({type:"LOGIN_FAIL"})}))}}})(ue),pe=function(){var e=Object(P.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.get("api/records/departments",L(k.getState)).then((function(e){return e.data})).catch((function(e){return k.dispatch(N(e.response.data,e.response.status))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(P.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.get("api/auth/userTypes",L(k.getState)).then((function(e){return e.data})).catch((function(e){return k.dispatch(N(e.response.data,e.response.status))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(P.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.get("api/records/categories",L(k.getState)).then((function(e){return e.data})).catch((function(e){return k.dispatch(N(e.response.data,e.response.status))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(P.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.get("api/records/rooms",L(k.getState)).then((function(e){return e.data})).catch((function(e){return k.dispatch(N(e.response.data,e.response.status))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(P.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.get("api/auth/users",L(k.getState)).then((function(e){return e.data.filter((function(e){return"\u0421\u0443\u043f\u0435\u0440 \u0410\u0434\u043c\u0438\u043d"!==e.userType}))})).catch((function(e){return k.dispatch(N(e.response.data,e.response.status))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(P.a)(M.a.mark((function e(t){var a,n,r,o,l,s,c,i,u,d;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.user_id,n=t.username,r=t.first_name,o=t.last_name,l=t.password,s=t.department,c=t.userType,i=t.room,u=t.file,d=new FormData,u&&d.append("file",u),l.length>0&&d.append("password",l),d.append("username",n),d.append("user_id",a),d.append("first_name",r),d.append("last_name",o),d.append("department",s),d.append("userType",c),d.append("room",i),e.abrupt("return",j.a.patch("/api/auth/users",d,L(k.getState)).then((function(){return k.dispatch(A({userUpdated:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"})),!0})).catch((function(e){return k.dispatch(A({userNotUpdated:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438"})),k.dispatch(N(e.response.data,e.response.status)),!1})));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={firstName:"",lastName:"",password:"",password2:"",departamentSelected:"",userTypeSelected:"",roomSelected:"",departments_options:[],userTypesOptions:[],roomsTypesOptions:[],selectedFile:""},e.onSubmit=function(t){t.preventDefault();var a=e.state,n=a.password,r=a.password2,o=a.firstName,l=a.lastName,s=a.departamentSelected,c=a.userTypeSelected,i=a.roomSelected,u=a.selectedFile;if(n!==r)e.props.createMessage({passwordNotMatch:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"});else{if(""===s||""===c||""===i)return void e.props.createMessage({fillAllFields:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f"});var d=e.getSelectedItemId(s,e.state.departments_options),p=e.getSelectedItemId(c,e.state.userTypesOptions),m=e.getSelectedItemId(i,e.state.roomsTypesOptions),h={username:ie(o,l),first_name:o,last_name:l,password:n,department:d,userType:p,room:m,file:u};e.props.register(h),e.clearInputs()}},e.onChange=function(t){return e.setState(Object(H.a)({},t.target.name,t.target.value))},e.handleDepartmentChange=function(t,a){var n=a.value;return e.setState({departamentSelected:n})},e.handleUserOptionsChange=function(t,a){var n=a.value;return e.setState({userTypeSelected:n})},e.handleRoomOptionsChange=function(t,a){var n=a.value;return e.setState({roomSelected:n})},e.onSelectFileHandler=function(t){e.setState({selectedFile:t.target.files[0]})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(P.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getDepartmentsAndSetToState(),this.getUserTypeAndSetToState(),this.getRoomsAndSetToState();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){if(!this.props.isAuthenticated)return r.a.createElement(p.a,{to:"/login/"});var e=this.state,t=e.firstName,a=e.lastName,n=e.password,o=e.password2;return r.a.createElement(U.a,null,r.a.createElement(F.a,null),r.a.createElement(q.a,{onSubmit:this.onSubmit},r.a.createElement("h2",{className:"text-center"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),r.a.createElement(q.a.Group,{widths:"equal"},r.a.createElement(q.a.Input,{name:"firstName",fluid:!0,label:"\u0418\u043c\u044f",placeholder:"\u0418\u043c\u044f",value:t,onChange:this.onChange,required:!0}),r.a.createElement(q.a.Input,{name:"lastName",fluid:!0,label:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",placeholder:"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",value:a,onChange:this.onChange,required:!0}),r.a.createElement(q.a.Input,{type:"file",name:"photoProfile",fluid:!0,label:"\u0424\u043e\u0442\u043e \u041f\u0440\u043e\u0444\u0438\u043b\u044f",placeholder:"\u0424\u043e\u0442\u043e \u041f\u0440\u043e\u0444\u0438\u043b\u044f",onChange:this.onSelectFileHandler,required:!0})),r.a.createElement(q.a.Group,{widths:"equal"},r.a.createElement(q.a.Input,{type:"password",name:"password",fluid:!0,label:"\u041f\u0430\u0440\u043e\u043b\u044c",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:n,onChange:this.onChange,required:!0}),r.a.createElement(q.a.Input,{type:"password",name:"password2",fluid:!0,label:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u041f\u0430\u0440\u043e\u043b\u044c",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u041f\u0430\u0440\u043e\u043b\u044c",value:o,onChange:this.onChange,required:!0})),r.a.createElement(q.a.Group,{widths:"equal"},r.a.createElement(q.a.Select,{fluid:!0,label:"\u0414\u0435\u043f\u0430\u0440\u0442\u0430\u043c\u0435\u043d\u0442",options:this.state.departments_options,onChange:this.handleDepartmentChange,required:!0}),r.a.createElement(q.a.Select,{fluid:!0,label:"\u0422\u0438\u043f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",name:"options",options:this.state.userTypesOptions,onChange:this.handleUserOptionsChange,required:!0}),r.a.createElement(q.a.Select,{fluid:!0,label:"\u041a\u0430\u0431\u0438\u043d\u0435\u0442 \u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044f",options:this.state.roomsTypesOptions,onChange:this.handleRoomOptionsChange,required:!0})),r.a.createElement(F.a,null),r.a.createElement("div",{className:"form-group text-center"},r.a.createElement("button",{type:"submit",className:"btn btn-success btn-lg rounded-lg"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))))}},{key:"getDepartmentsAndSetToState",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe().then((function(e){t.setState({departments_options:t.mapListToSelectOptions(e)})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserTypeAndSetToState",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me().then((function(e){t.setState({userTypesOptions:t.mapListToSelectOptions(e)})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getRoomsAndSetToState",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe().then((function(e){t.setState({roomsTypesOptions:t.mapListToSelectOptions(e)})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"mapListToSelectOptions",value:function(e){var t=[];return e.forEach((function(e){return t.push({key:e.id,text:e.name,value:e.name})})),t.filter((function(e){return"\u0421\u0443\u043f\u0435\u0440 \u0410\u0434\u043c\u0438\u043d"!==e.text}))}},{key:"getSelectedItemId",value:function(e,t){return t.find((function(t){return t.text===e})).key}},{key:"clearInputs",value:function(){this.setState({firstName:"",lastName:"",password:"",password2:""})}}]),a}(n.Component),ye=Object(f.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{register:function(e){var t=e.username,a=e.first_name,n=e.last_name,r=e.password,o=e.department,l=e.userType,s=e.room,c=e.file;return function(e,i){var u=new FormData;u.append("file",c),u.append("username",t),u.append("first_name",a),u.append("last_name",n),u.append("password",r),u.append("department",o),u.append("userType",l),u.append("room",s),j.a.post("/api/auth/register",u,L(i)).then((function(t){e(A({userRegistered:"\u041d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441\u043e\u0437\u0434\u0430\u043d"})),e({type:"REGISTER_SUCCESS",payload:t.data})})).catch((function(t){e(A({userNotRegistered:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"})),e(N(t.response.data,t.response.status)),e({type:"REGISTER_FAIL"})}))}},createMessage:A})(ve),be=a(124),Se=Object(f.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=Object(be.a)(e,["component","auth"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return a.isLoading?r.a.createElement("h2",null,"Loading..."):a.isAuthenticated?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/login"})}}))})),Ce=a(221),_e=function(e,t){return function(a,n){var r=new FormData;r.append("file",e),r.append("record_detail",t),j.a.post("/api/records/file/",r,L(n),{}).then((function(e){a({type:"FILE_UPLOAD_SUCCESSFULLY",payload:e.data})})).catch((function(e){k.dispatch(N(e.response.data,e.response.status))}))}},Oe=(a(152),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={sub_category_options:[],short_description:"",subCategorySelected:"",deleteConfirmOpen:!1,selectedRecordId:-1,selectedFile:null},e.componentDidMount=Object(P.a)(M.a.mark((function t(){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.getRecordDetails(e.props.selectedRecord.id),e.getSubCategoriesAndSetToState();case 2:case"end":return t.stop()}}),t)}))),e.handleCategorySelectOption=function(t,a){var n=a.value;return e.setState({subCategorySelected:n})},e.handleChange=function(t){e.setState(Object(H.a)({},t.target.name,t.target.value))},e.onSubmit=function(){var t=Object(P.a)(M.a.mark((function t(a){var n,r,o,l,s;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,r=n.subCategorySelected,o=n.short_description,l=e.props.selectedRecord.id,s=e.getSelectedItemId(r,e.state.sub_category_options),t.next=6,$(l,o,s);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.playRecordDetail=function(t){var a={selectedRecordId:parseInt(t.currentTarget.parentNode.parentNode.parentNode.getAttribute("record_detail_id")),login:e.props.room.camera_login,password:e.props.room.camera_password,room_name:e.props.room.name,port:e.props.room.port,ipAddress:e.props.room.ip_address};e.props.playRecordDetail(a)},e.showStopConfirm=function(t){var a=parseInt(t.currentTarget.parentNode.parentNode.getAttribute("record_detail_id"));e.setState({selectedRecordId:a}),Object(X.confirmAlert)({title:"\u0421\u0442\u043e\u043f \u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0432\u0438\u0434\u0435\u043e",message:"\u041e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c \u0432\u0438\u0434\u0435\u043e?",buttons:[{label:"\u0414\u0430",onClick:function(){var t=e.state.selectedRecordId;e.props.stopRecordDetail(t)}},{label:"\u041d\u0435\u0442",onClick:function(){}}]})},e.showRemoveConfirm=function(t){var a=parseInt(t.currentTarget.parentNode.parentNode.getAttribute("record_detail_id"));e.setState({deleteConfirmOpen:!0,selectedRecordId:a}),Object(X.confirmAlert)({title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043f\u0438\u0441\u0438",message:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043f\u0438\u0441\u044c?",buttons:[{label:"\u0414\u0430",onClick:function(){var t=e.state.selectedRecordId;e.props.removeRecordDetail(t)}},{label:"\u041d\u0435\u0442",onClick:function(){}}]})},e.onSelectFileHandler=function(t){e.setState({selectedFile:t.target.files[0]})},e.uploadVideoOnClickHandler=function(t){if(null!==e.state.selectedFile){var a=parseInt(t.currentTarget.parentNode.parentNode.parentNode.getAttribute("record_detail_id"));e.props.uploadRecordDetailFileToServer(e.state.selectedFile,a)}},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.auth,t=e.user_info,a=e.user,n=r.a.createElement("div",null,r.a.createElement(J.a,{positive:!0,onClick:this.playRecordDetail},"\u0417\u0430\u043f\u0438\u0441\u044c \u0412\u0438\u0434\u0435\u043e"),r.a.createElement("h5",null,"\u0418\u043b\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u0443\u0442\u044c \u0444\u0430\u0439\u043b \u0441\u0430\u043c\u043e\u043c\u0443"),r.a.createElement(Ce.a,{type:"file",name:"file",onChange:this.onSelectFileHandler,className:"marginTop5"}),r.a.createElement(J.a,{primary:!0,onClick:this.uploadVideoOnClickHandler},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0444\u0430\u0439\u043b")),o=r.a.createElement(J.a,{color:"yellow",onClick:this.showStopConfirm},"\u0421\u0442\u043e\u043f \u0432\u0438\u0434\u0435\u043e"),l=r.a.createElement(J.a,{negative:!0,onClick:this.showRemoveConfirm},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0430\u0439\u043b"),s=this.props.selectedRecord;return r.a.createElement(U.a,null,r.a.createElement(F.a,null),r.a.createElement("h2",null,"\u0414\u0435\u043b\u043e"),r.a.createElement(V.a,{celled:!0},r.a.createElement(V.a.Header,null,r.a.createElement(V.a.Row,{key:s.id},r.a.createElement(V.a.HeaderCell,null,s.record_id),r.a.createElement(V.a.HeaderCell,null,s.short_description),r.a.createElement(V.a.HeaderCell,null," ",new Date(s.created_at).toLocaleString("ru-RU")),this.props.recordDetails.length>0?r.a.createElement(V.a.HeaderCell,null,r.a.createElement("a",{href:"http://localhost:8000/api/records/download/".concat(s.id),download:!0},"\u0421\u043a\u0430\u0447\u0430\u0442\u044c \u0434\u0435\u043b\u043e")):r.a.createElement("div",null)))),r.a.createElement(F.a,null),r.a.createElement("h3",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"),r.a.createElement(V.a,{celled:!0},r.a.createElement(V.a.Header,null,r.a.createElement(V.a.Row,null,r.a.createElement(V.a.HeaderCell,null,"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"),r.a.createElement(V.a.HeaderCell,null,"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),r.a.createElement(V.a.HeaderCell,null,"\u0421\u0442\u0430\u0442\u0443\u0441"),r.a.createElement(V.a.HeaderCell,null,"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"),r.a.createElement(V.a.HeaderCell,null,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"),r.a.createElement(V.a.HeaderCell,null,"\u0421\u0441\u044b\u043b\u043a\u0430 \u0434\u043b\u044f \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f"))),this.props.recordDetails.length>0?r.a.createElement(V.a.Body,null,this.props.recordDetails.map((function(e){return"a"===e.record_detail_status?r.a.createElement(V.a.Row,{key:e.id},r.a.createElement(V.a.Cell,null,e.category_id),r.a.createElement(V.a.Cell,null,e.short_description),r.a.createElement(V.a.Cell,null,e.status),r.a.createElement(V.a.Cell,null,new Date(e.created_at).toLocaleString("ru-RU")),r.a.createElement(V.a.Cell,{record_detail_id:e.id},t?1!==t.userType.id&&s.owner===a.id&&r.a.createElement("div",null,"\u041d\u0435 \u043d\u0430\u0447\u0430\u0442\u043e"===e.status?n:r.a.createElement("div",null),"\u0418\u0434\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u044c"===e.status?o:r.a.createElement("div",null),"\u0424\u0430\u0439\u043b \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d"===e.status?l:r.a.createElement("div",null)):r.a.createElement("div",null)),r.a.createElement(V.a.Cell,null,e.file?r.a.createElement("a",{href:"http://localhost:8000".concat(e.file),download:!0},"\u0421\u043a\u0430\u0447\u0430\u0442\u044c"):r.a.createElement("div",null))):r.a.createElement("div",null)}))):r.a.createElement("div",null)),t?1!==t.userType.id&&s.owner===a.id&&r.a.createElement("div",null,r.a.createElement("h3",null,"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"),r.a.createElement(q.a,{onSubmit:this.onSubmit},r.a.createElement(q.a.Group,null,r.a.createElement(q.a.Select,{label:"\u041f\u043e\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",options:this.state.sub_category_options,onChange:this.handleCategorySelectOption,required:!0})),r.a.createElement(q.a.TextArea,{name:"short_description",label:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u0435\u043b\u0430",value:this.state.short_description,onChange:this.handleChange}),r.a.createElement(q.a.Button,{primary:!0},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))):r.a.createElement("span",null))}},{key:"getSubCategoriesAndSetToState",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he().then((function(e){t.setState({sub_category_options:t.mapListToSelectOptions(e)})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"mapListToSelectOptions",value:function(e){var t=[];return e.forEach((function(e){return t.push({key:e.id,text:e.title,value:e.title})})),t}},{key:"getSelectedItemId",value:function(e,t){return t.find((function(t){return t.text===e})).key}}]),a}(n.Component)),we=Object(f.b)((function(e){return{selectedRecord:e.recordDetails.selectedRecord,recordDetails:e.recordDetails.recordDetails,room:e.auth.user_info.room,auth:e.auth}}),{getRecordDetails:function(e){return function(t,a){j.a.get("/api/records/details/".concat(e),L(a)).then((function(e){t({type:"GET_RECORD_DETAILS",payload:e.data})})).catch((function(e){return t(N(e.response.data,e.response.status))}))}},playRecordDetail:K,stopRecordDetail:Q,removeRecordDetail:function(e){return function(t,a){j.a.get("/api/records/details/".concat(e,"/remove/"),L(a)).then((function(){t({type:"RECORD_DETAIL_REMOVED_SUCCESSFULLY",payload:e})})).catch((function(e){return t(N(e.response.data,e.response.status))}))}},uploadRecordDetailFileToServer:_e})(Oe),Re=(a(204),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={oldPassword:"",newPassword:"",reNewPassword:""},e.onChange=function(t){return e.setState(Object(H.a)({},t.target.name,t.target.value))},e.onSubmit=function(t){t.preventDefault();var a=e.state,n=a.oldPassword,r=a.newPassword;if(r!==a.reNewPassword)e.props.createMessage({passwordNotMatch:"\u041d\u043e\u0432\u044b\u0435 \u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"});else{var o={username:e.props.auth.user.username,oldPassword:n,newPassword:r};e.props.changePassword(o)}},e}return Object(c.a)(a,[{key:"render",value:function(){if(!this.props.isAuthenticated)return r.a.createElement(p.a,{to:"/"});var e=this.state,t=e.oldPassword,a=e.newPassword,n=e.reNewPassword;return r.a.createElement("div",{className:"col-md-6 m-auto"},r.a.createElement("div",{className:"card card-body mt-2"},r.a.createElement("h2",{className:"text-center"},"\u041f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0421\u0442\u0430\u0440\u044b\u0439 \u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("input",{type:"password",className:"form-control",name:"oldPassword",onChange:this.onChange,value:t,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u041d\u043e\u0432\u044b\u0439 \u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("input",{type:"password",className:"form-control",name:"newPassword",onChange:this.onChange,value:a,required:!0,minLength:8})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u041d\u043e\u0432\u044b\u0439 \u041f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement("input",{type:"password",className:"form-control",name:"reNewPassword",onChange:this.onChange,value:n,required:!0,minLength:8,placeholder:"\u044d\u0442\u043e \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u0447\u0442\u043e \u0432\u044b \u0432\u0432\u0435\u043b\u0438 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e"})),r.a.createElement("div",{className:"form-group text-center"},r.a.createElement("button",{type:"submit",className:"btn btn-success btn-lg rounded-lg"},"\u041f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u041f\u0430\u0440\u043e\u043b\u044c")))))}}]),a}(n.Component)),Te=Object(f.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,auth:e.auth}}),{createMessage:A,changePassword:function(e){var t=e.username,a=e.oldPassword,n=e.newPassword;return function(e,r){var o=JSON.stringify({username:t,password:a,new_password:n});j.a.put("/api/auth/user",o,L(r)).then((function(){e(A({passwordChanged:"\u041f\u0430\u0440\u043e\u043b\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d"})),e({type:"PASSWORD_CHANGED"})})).catch((function(t){e(N(t.response.data,t.response.status))}))}}})(Re),ke=a(75),De=a(225),je=a(230),Ae=a(227),Ne=a(160),Le=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user_id:-1,first_name:"",last_name:"",password:"",password2:"",departamentSelected:"",userTypeSelected:"",roomSelected:"",departments_options:[],userTypesOptions:[],roomsTypesOptions:[],selectedFile:""},e.onSubmit=function(){var t=Object(P.a)(M.a.mark((function t(a){var n,r,o,l,s,c,i,u,d,p,m,h,f,E,g;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state,r=n.user_id,o=n.password,l=n.password2,s=n.first_name,c=n.last_name,i=n.departamentSelected,u=n.userTypeSelected,d=n.roomSelected,p=n.selectedFile,o===l){t.next=6;break}e.props.createMessage({passwordNotMatch:"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"}),t.next=18;break;case 6:if(""!==i&&""!==u&&""!==d){t.next=9;break}return e.props.createMessage({fillAllFields:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f"}),t.abrupt("return");case 9:return m=e.getSelectedItemId(i,e.state.departments_options),h=e.getSelectedItemId(u,e.state.userTypesOptions),f=e.getSelectedItemId(d,e.state.roomsTypesOptions),E=ie(s,c),g={user_id:r,username:E,first_name:s,last_name:c,password:o,department:m,userType:h,room:f,file:p},t.next=16,ge(g);case 16:t.sent&&e.props.handleClick();case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleDepartmentChange=function(t,a){var n=a.value;return e.setState({departamentSelected:n})},e.handleUserOptionsChange=function(t,a){var n=a.value;return e.setState({userTypeSelected:n})},e.handleRoomOptionsChange=function(t,a){var n=a.value;return e.setState({roomSelected:n})},e.onSelectFileHandler=function(t){e.setState({selectedFile:t.target.files[0]})},e.onChange=function(t){return e.setState(Object(H.a)({},t.target.name,t.target.value))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t,a,n,r,o,l,s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getDepartmentsAndSetToState(),this.getUserTypeAndSetToState(),this.getRoomsAndSetToState(),t=this.props.selected_user,a=t.user_id,n=t.first_name,r=t.last_name,o=t.department,l=t.room,s=t.userType,this.setState({user_id:a,first_name:n,last_name:r,departamentSelected:o,roomSelected:l,userTypeSelected:s});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(je.a,{className:"mt-3 mb-3",variant:"primary",onClick:this.props.handleClick.bind(this)},"\u041d\u0430\u0437\u0430\u0434 \u041a \u0421\u043f\u0438\u0441\u043a\u0443"),r.a.createElement(Ae.a,{onSubmit:this.onSubmit},r.a.createElement(Ae.a.Row,null,r.a.createElement(Ae.a.Group,{as:Ne.a,controlId:"formGridFirstName"},r.a.createElement(Ae.a.Label,null,"\u0418\u043c\u044f"),r.a.createElement(Ae.a.Control,{type:"text",value:this.state.first_name,name:"first_name",onChange:this.onChange})),r.a.createElement(Ae.a.Group,{as:Ne.a,controlId:"formGridLastName"},r.a.createElement(Ae.a.Label,null,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),r.a.createElement(Ae.a.Control,{type:"text",value:this.state.last_name,name:"last_name",onChange:this.onChange})),r.a.createElement(Ae.a.Group,{as:Ne.a,controlId:"formGridProfilePhoto"},r.a.createElement(Ae.a.Label,null,"\u0424\u043e\u0442\u043e \u041f\u0440\u043e\u0444\u0438\u043b\u044f"),r.a.createElement(Ae.a.File,{label:"\u0424\u043e\u0442\u043e \u043f\u0440\u043e\u0444\u0438\u043b\u044f",custom:!0,onChange:this.onSelectFileHandler}))),r.a.createElement(Ae.a.Row,null,r.a.createElement(Ae.a.Group,{as:Ne.a,controlId:"formGridNewPassword"},r.a.createElement(Ae.a.Label,null,"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement(Ae.a.Control,{type:"password",placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",name:"password",onChange:this.onChange})),r.a.createElement(Ae.a.Group,{as:Ne.a,controlId:"formGridReNewPassword"},r.a.createElement(Ae.a.Label,null,"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"),r.a.createElement(Ae.a.Control,{type:"password",placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",name:"password2",onChange:this.onChange}))),r.a.createElement(q.a.Group,{widths:"equal"},r.a.createElement(q.a.Select,{className:"mr-5",fluid:!0,label:"\u0414\u0435\u043f\u0430\u0440\u0442\u0430\u043c\u0435\u043d\u0442",options:this.state.departments_options,onChange:this.handleDepartmentChange,value:this.state.departamentSelected,required:!0}),r.a.createElement(q.a.Select,{className:"mr-5",fluid:!0,label:"\u0422\u0438\u043f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",name:"options",options:this.state.userTypesOptions,onChange:this.handleUserOptionsChange,value:this.state.userTypeSelected,required:!0}),r.a.createElement(q.a.Select,{className:"mr-5",fluid:!0,label:"\u041a\u0430\u0431\u0438\u043d\u0435\u0442 \u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044f",options:this.state.roomsTypesOptions,onChange:this.handleRoomOptionsChange,value:this.state.roomSelected,required:!0})),r.a.createElement("div",{className:"form-group text-center"},r.a.createElement(je.a,{variant:"primary",type:"submit",className:"mt-3"},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"))))}},{key:"getDepartmentsAndSetToState",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe().then((function(e){t.setState({departments_options:t.mapListToSelectOptions(e)})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getUserTypeAndSetToState",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me().then((function(e){t.setState({userTypesOptions:t.mapListToSelectOptions(e)})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getRoomsAndSetToState",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe().then((function(e){t.setState({roomsTypesOptions:t.mapListToSelectOptions(e)})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"mapListToSelectOptions",value:function(e){var t=[];return e.forEach((function(e){return t.push({key:e.id,text:e.name,value:e.name})})),t.filter((function(e){return"\u0421\u0443\u043f\u0435\u0440 \u0410\u0434\u043c\u0438\u043d"!==e.text}))}},{key:"getSelectedItemId",value:function(e,t){return t.find((function(t){return t.text===e})).key}}]),a}(n.Component),Ie=Object(f.b)(null,{createMessage:A})(Le),xe=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={user:{},usersListWithCards:[],showUsersList:!0,showUserChangeForm:!1,selected_user_id:-1,selected_user:{}},n.goToUserProfileChange=function(e){var t=parseInt(e.currentTarget.getAttribute("user_id")),a={user_id:t,first_name:e.currentTarget.getAttribute("first_name"),last_name:e.currentTarget.getAttribute("last_name"),department:e.currentTarget.getAttribute("department"),room:e.currentTarget.getAttribute("room"),userType:e.currentTarget.getAttribute("userType")};n.setState({showUsersList:!1,showUserChangeForm:!0,selected_user_id:t,selected_user:a})},n.handleClick=n.handleClick.bind(Object(ke.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(P.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getUsersAndSetToState();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(te.a,null,this.state.showUsersList&&this.state.usersListWithCards,this.state.showUserChangeForm&&r.a.createElement(Ie,{handleClick:this.handleClick,selected_user:this.state.selected_user}))}},{key:"getUsersAndSetToState",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee().then((function(e){var a="",n=r.a.createElement("div",null);e.length>0&&(n=e.map((function(e){var n=e.department;return r.a.createElement("div",{key:e.user_id},n!==a?r.a.createElement("h3",{className:"mt-3"},a=n):r.a.createElement("div",null),r.a.createElement(De.a,{style:{display:"flex",flexDirection:"row",justifyContent:"left"}},r.a.createElement(ae.a,{className:"mt-3",style:{flex:1}},r.a.createElement(ae.a.Img,{className:"profileImage",variant:"top",src:e.profileImage,style:{width:"10em",height:"10em"}}),r.a.createElement(ae.a.Body,null,r.a.createElement(ae.a.Title,null,"".concat(e.first_name," ").concat(e.last_name)),r.a.createElement(ae.a.Text,null,"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: ",e.userType),r.a.createElement(ae.a.Text,null,"\u041a\u0430\u0431\u0438\u043d\u0435\u0442: ",e.room)),r.a.createElement(je.a,{variant:"primary",style:{maxWidth:"20%"},user_id:e.user_id,first_name:e.first_name,last_name:e.last_name,department:e.department,room:e.room,userType:e.userType,onClick:t.goToUserProfileChange},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"))))})),t.setState({usersListWithCards:n}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handleClick",value:function(){this.setState({showUsersList:!0,showUserChangeForm:!1}),this.getUsersAndSetToState()}}]),a}(n.Component),Ue=Object(f.b)((function(e){return{auth:e.auth}}))((function(e){var t=e.component,a=e.auth,n=Object(be.a)(e,["component","auth"]);return r.a.createElement(p.b,Object.assign({},n,{render:function(e){return a.isLoading?r.a.createElement("h2",null,"Loading..."):a.isAuthenticated?"\u0421\u0443\u043f\u0435\u0440 \u0410\u0434\u043c\u0438\u043d"===a.user_type?r.a.createElement(t,e):r.a.createElement(p.a,{to:"/"}):r.a.createElement(p.a,{to:"/login"})}}))})),Fe=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={deleteConfirmOpen:!1,selectedRecordId:-1},e.MoreInfoLinkOnClickHandler=function(t){var a=parseInt(t.currentTarget.parentNode.getAttribute("record_id")),n=e.props.records.find((function(e){return e.id===a}));e.props.addSelectedRecordToStory(n)},e.deleteRecordSubmit=function(t){var a=parseInt(t.currentTarget.parentNode.getAttribute("record_id"));e.setState({selectedRecordId:a}),Object(X.confirmAlert)({title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0434\u0435\u043b\u0430",message:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0435\u043b\u043e?",buttons:[{label:"\u0414\u0430",onClick:function(){var t=e.state.selectedRecordId;e.props.adminRemoveRecord(t)}},{label:"\u041d\u0435\u0442",onClick:function(){}}]})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.props.getRecords()}},{key:"render",value:function(){var e=this.identifyUserTypeAndGetRecord();return r.a.createElement(U.a,null,r.a.createElement(F.a,null),r.a.createElement("h3",null,"\u0414\u0435\u043b\u0430 \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438"),r.a.createElement(V.a,{celled:!0},r.a.createElement(V.a.Header,null,r.a.createElement(V.a.Row,null,r.a.createElement(V.a.HeaderCell,null,"ID \u0434\u0435\u043b\u0430"),r.a.createElement(V.a.HeaderCell,null,"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),r.a.createElement(V.a.HeaderCell,null,"\u0421\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044c \u0434\u0435\u043b\u0430"),r.a.createElement(V.a.HeaderCell,null,"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"),r.a.createElement(V.a.HeaderCell,null,"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043e \u0434\u0435\u043b\u0435"),r.a.createElement(V.a.HeaderCell,null,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f"))),r.a.createElement(V.a.Body,null,e),r.a.createElement(F.a,null)))}},{key:"identifyUserTypeAndGetRecord",value:function(){var e=this.props,t=e.records,a=e.user_type;if(t.length>0&&a&&"\u0421\u0443\u043f\u0435\u0440 \u0410\u0434\u043c\u0438\u043d"===a)return this.getSuperAdminRecord()}},{key:"getSuperAdminRecord",value:function(){var e=this,t=this.getRemoveAndConfirmButton();return this.props.records.map((function(a){return"o"===a.status?r.a.createElement(V.a.Row,{key:a.id},r.a.createElement(V.a.Cell,null,a.record_id),r.a.createElement(V.a.Cell,null,a.short_description),r.a.createElement(V.a.Cell,null,"".concat(a.first_name," ").concat(a.last_name)),r.a.createElement(V.a.Cell,null,new Date(a.created_at).toLocaleString("ru-RU")),r.a.createElement(V.a.Cell,{record_id:a.id},r.a.createElement(d.b,{onClick:e.MoreInfoLinkOnClickHandler,to:"/detail"},"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435")),r.a.createElement(V.a.Cell,{record_id:a.id},t)):r.a.createElement(V.a.Row,null)}))}},{key:"getRemoveAndConfirmButton",value:function(){return r.a.createElement(J.a,{negative:!0,onClick:this.deleteRecordSubmit},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0414\u0435\u043b\u043e")}}]),a}(n.Component),He=Object(f.b)((function(e){return{records:e.records.records,user_type:e.auth.user_type,user_info:e.auth.user_info,user:e.auth.user}}),{getRecords:B,addSelectedRecordToStory:z,adminRemoveRecord:function(e){return function(t,a){j.a.delete("/api/records/".concat(e,"/"),L(a)).then((function(){t({type:"RECORD_REMOVED_SUCCESSFULLY",payload:e})})).catch((function(e){return t(N(e.response.data,e.response.status))}))}}})(Fe),Ge=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={sub_category_options:[],short_description:"",subCategorySelected:"",deleteConfirmOpen:!1,selectedRecordId:-1,selectedFile:null},e.componentDidMount=Object(P.a)(M.a.mark((function t(){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.getAllRecordsDetails(),e.getSubCategoriesAndSetToState();case 2:case"end":return t.stop()}}),t)}))),e.handleCategorySelectOption=function(t,a){var n=a.value;return e.setState({subCategorySelected:n})},e.handleChange=function(t){e.setState(Object(H.a)({},t.target.name,t.target.value))},e.onSubmit=function(){var t=Object(P.a)(M.a.mark((function t(a){var n,r,o,l,s;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=e.state,r=n.subCategorySelected,o=n.short_description,l=e.props.selectedRecord.id,s=e.getSelectedItemId(r,e.state.sub_category_options),t.next=6,$(l,o,s);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showRemoveConfirm=function(t){var a=parseInt(t.currentTarget.parentNode.parentNode.getAttribute("record_detail_id"));e.setState({deleteConfirmOpen:!0,selectedRecordId:a}),Object(X.confirmAlert)({title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0444\u0430\u0439\u043b\u0430",message:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0430\u0439\u043b?",buttons:[{label:"\u0414\u0430",onClick:function(){var t=e.state.selectedRecordId;e.props.deleteRecordDetail(t)}},{label:"\u041d\u0435\u0442",onClick:function(){}}]})},e.onSelectFileHandler=function(t){e.setState({selectedFile:t.target.files[0]})},e.uploadVideoOnClickHandler=function(t){if(null!==e.state.selectedFile){var a=parseInt(t.currentTarget.parentNode.parentNode.parentNode.getAttribute("record_detail_id"));e.props.uploadRecordDetailFileToServer(e.state.selectedFile,a)}},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props.auth.user_info,t=r.a.createElement(J.a,{negative:!0,onClick:this.showRemoveConfirm},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0444\u0430\u0439\u043b");return r.a.createElement(U.a,null,r.a.createElement(F.a,null),r.a.createElement("h3",null,"\u0424\u0430\u0439\u043b\u044b \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f"),r.a.createElement(V.a,{celled:!0},r.a.createElement(V.a.Header,null,r.a.createElement(V.a.Row,null,r.a.createElement(V.a.HeaderCell,null,"ID \u0434\u0435\u043b\u0430"),r.a.createElement(V.a.HeaderCell,null,"\u041f\u043e\u0434\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),r.a.createElement(V.a.HeaderCell,null,"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),r.a.createElement(V.a.HeaderCell,null,"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"),r.a.createElement(V.a.HeaderCell,null,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435"),r.a.createElement(V.a.HeaderCell,null,"\u0421\u0441\u044b\u043b\u043a\u0430 \u0434\u043b\u044f \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f"))),this.props.recordDetails.length>0?r.a.createElement(V.a.Body,null,this.props.recordDetails.map((function(a){return"o"===a.record_detail_status?r.a.createElement(V.a.Row,{key:a.id},r.a.createElement(V.a.Cell,null,a.record_id),r.a.createElement(V.a.Cell,null,a.category_id),r.a.createElement(V.a.Cell,null,a.short_description),r.a.createElement(V.a.Cell,null,new Date(a.created_at).toLocaleString("ru-RU")),r.a.createElement(V.a.Cell,{record_detail_id:a.id},e?r.a.createElement("div",null,t):r.a.createElement("div",null)),r.a.createElement(V.a.Cell,null,a.file?r.a.createElement("a",{href:"http://localhost:8000".concat(a.file),download:!0},"\u0421\u043a\u0430\u0447\u0430\u0442\u044c"):r.a.createElement("div",null))):r.a.createElement("div",null)}))):r.a.createElement("div",null)),e?3===e.userType.id&&r.a.createElement("div",null,r.a.createElement("h3",null,"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u041f\u043e\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"),r.a.createElement(q.a,{onSubmit:this.onSubmit},r.a.createElement(q.a.Group,null,r.a.createElement(q.a.Select,{label:"\u041f\u043e\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",options:this.state.sub_category_options,onChange:this.handleCategorySelectOption,required:!0})),r.a.createElement(q.a.TextArea,{name:"short_description",label:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0434\u0435\u043b\u0430",value:this.state.short_description,onChange:this.handleChange}),r.a.createElement(q.a.Button,{primary:!0},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))):r.a.createElement("span",null))}},{key:"getSubCategoriesAndSetToState",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he().then((function(e){t.setState({sub_category_options:t.mapListToSelectOptions(e)})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"mapListToSelectOptions",value:function(e){var t=[];return e.forEach((function(e){return t.push({key:e.id,text:e.title,value:e.title})})),t}},{key:"getSelectedItemId",value:function(e,t){return t.find((function(t){return t.text===e})).key}}]),a}(n.Component),Me=Object(f.b)((function(e){return{selectedRecord:e.recordDetails.selectedRecord,recordDetails:e.recordDetails.recordDetails,room:e.auth.user_info.room,auth:e.auth}}),{getAllRecordsDetails:function(){return function(e,t){j.a.get("/api/records/details/",L(t)).then((function(t){e({type:"GET_ALL_RECORD_DETAILS",payload:t.data})})).catch((function(t){return e(N(t.response.data,t.response.status))}))}},playRecordDetail:K,stopRecordDetail:Q,deleteRecordDetail:function(e){return function(t,a){j.a.put("/api/records/details/".concat(e,"/remove/"),L(a)).then((function(){t({type:"RECORD_DETAIL_REMOVED_SUCCESSFULLY",payload:e})})).catch((function(e){return t(N(e.response.data,e.response.status))}))}},uploadRecordDetailFileToServer:_e})(Ge),Pe=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={user:{},usersListWithCards:[],showUsersList:!0,showUserChangeForm:!1,selected_user_id:-1,selected_user:{}},n.handleClick=n.handleClick.bind(Object(ke.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=Object(P.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getUsersAndSetToState();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(te.a,null,this.state.showUsersList&&this.state.usersListWithCards)}},{key:"getUsersAndSetToState",value:function(){var e=Object(P.a)(M.a.mark((function e(){var t,a=this;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("department"),e.next=3,Ee().then((function(e){console.log(e);var n="",o=r.a.createElement("div",null);e.length>0&&(o=e.map((function(e){if(e.department===t){var a=e.department;return r.a.createElement("div",{key:e.user_id},a!==n?r.a.createElement("h3",{className:"mt-3"},n=a):r.a.createElement("div",null),r.a.createElement(De.a,{style:{display:"flex",flexDirection:"row",justifyContent:"left"}},r.a.createElement(ae.a,{className:"mt-3",style:{flex:1}},r.a.createElement(ae.a.Img,{className:"profileImage",variant:"top",src:e.profileImage,style:{width:"10em",height:"10em"}}),r.a.createElement(ae.a.Body,null,r.a.createElement(ae.a.Title,null,"".concat(e.first_name," ").concat(e.last_name)),r.a.createElement(ae.a.Text,null,"\u0414\u043e\u043b\u0436\u043d\u043e\u0441\u0442\u044c: ",e.userType),r.a.createElement(ae.a.Text,null,"\u041a\u0430\u0431\u0438\u043d\u0435\u0442: ",e.room)))))}return r.a.createElement("div",null)})),a.setState({usersListWithCards:o}))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handleClick",value:function(){this.setState({showUsersList:!0,showUserChangeForm:!1}),this.getUsersAndSetToState()}}]),a}(n.Component),qe={timeout:2500,position:"top center"},Be=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){k.dispatch((function(e,t){e({type:"USER_LOADING"}),j.a.get("/api/auth/user",L(t)).then((function(t){e({type:"USER_LOADED",payload:t.data})})).catch((function(t){e(N(t.response.data,t.response.status)),e({type:"AUTH_ERROR"})}))}))}},{key:"render",value:function(){return r.a.createElement(f.a,{store:k},r.a.createElement(m.a,Object.assign({template:h.a},qe),r.a.createElement(d.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(x,null),r.a.createElement(ce,null),r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/login",component:de}),r.a.createElement(Ue,{exact:!0,path:"/register",component:ye}),r.a.createElement(Se,{exact:!0,path:"/detail",component:we}),r.a.createElement(Se,{exact:!0,path:"/",component:le}),r.a.createElement(Se,{exact:!0,path:"/changepassword",component:Te}),r.a.createElement(Se,{exact:!0,path:"/allDepartmentUsers",component:Pe}),r.a.createElement(Ue,{exact:!0,path:"/allusers",component:xe}),r.a.createElement(Ue,{exact:!0,path:"/deleteRecord",component:He}),r.a.createElement(Ue,{exact:!0,path:"/deleteRecordDetail",component:Me}))))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[175,1,2]]]);
//# sourceMappingURL=main.5be81f06.chunk.js.map